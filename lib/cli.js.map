{"version":3,"sources":["../src/cli.js"],"names":["babel","babelrc","JSON","parse","readFileSync","join","__dirname","style","launch","name","transform","code","plugins","filename","compile","input","from","then","mp","writeFileSync","output","console","log","catch","error"],"mappings":";;;;AAAA;;;;AACA;;;;AACA;;IAAYA,K;;AAEZ;;;;;;;;AAEA,IAAMC,UAAUC,KAAKC,KAAL,CAAW,aAAGC,YAAH,CAAgB,eAAKC,IAAL,CAAUC,SAAV,EAAqB,eAArB,CAAhB,EAAuD,OAAvD,CAAX,CAAhB;AACA,IAAMC,QAAQ,8BAAd;AACA,IAAMC,SAAS,SAATA,MAAS;AAAA,iDAA4CC,IAA5C;AAAA,CAAf;;AAEA,IAAMC,YAAY,SAAZA,SAAY,CAACC,IAAD,EAAOF,IAAP;AAAA,WAAgBT,MAAMU,SAAN,CAAgBC,IAAhB,eAA2BV,OAA3B,IAAoCW,SAAS,CAAC,8BAAD,CAA7C,EAA+EC,UAAUJ,IAAzF,IAAhB;AAAA,CAAlB;;AAEA,IAAMK,UAAU,SAAVA,OAAU,GAAM;AAClB,QAAMC,QAAQ,aAAGX,YAAH,CAAgB,WAAhB,EAA6B,OAA7B,CAAd;AACA,mBAASY,IAAT,CAAcD,KAAd,EACKE,IADL,CACU;AAAA,4BAAYC,EAAZ,IAAgBP,MAAMO,GAAGP,IAAH,EAAtB;AAAA,KADV,EAEKM,IAFL,CAEU;AAAA,4BAAYC,EAAZ,EAAmBR,UAAUQ,GAAGP,IAAb,EAAmBO,GAAGT,IAAtB,CAAnB;AAAA,KAFV,EAGKQ,IAHL,CAGU;AAAA,YAAGN,IAAH,QAAGA,IAAH;AAAA,YAASF,IAAT,QAASA,IAAT;AAAA,qCAAyCF,KAAzC,oBAA6DI,IAA7D,qBAAiFH,OAAOC,IAAP,CAAjF;AAAA,KAHV,EAIKQ,IAJL,CAIU,kBAAU;AACZ,qBAAGE,aAAH,CAAiB,eAAKd,IAAL,CAAUC,SAAV,EAAqB,iBAArB,CAAjB,EAA0Dc,MAA1D,EAAkE,OAAlE;AACAC,gBAAQC,GAAR,CAAYF,MAAZ,EAFY,CAES;AACxB,KAPL,EAOOG,KAPP,CAOaF,QAAQG,KAPrB,EAFkB,CASW;AAChC,CAVD;;AAYAV","file":"cli.js","sourcesContent":["import fs from 'fs';\r\nimport path from 'path';\r\nimport * as babel from 'babel-core';\r\n\r\nimport Markplus from './core';\r\n\r\nconst babelrc = JSON.parse(fs.readFileSync(path.join(__dirname, './../.babelrc'), 'utf-8'));\r\nconst style = '<style>.Markplus { }</style>';\r\nconst launch = name => `<div id=\"markplus\"></div><script>${name}.default(document.querySelector('#markplus'));</script>`;\r\n\r\nconst transform = (code, name) => babel.transform(code, { ...babelrc, plugins: ['transform-es2015-modules-umd'], filename: name })\r\n\r\nconst compile = () => {\r\n    const input = fs.readFileSync('ReadMe.mp', 'utf-8');\r\n    Markplus.from(input)\r\n        .then(mp => ({ ...mp, code: mp.code() }))\r\n        .then(mp => ({ ...mp, ...transform(mp.code, mp.name) }))\r\n        .then(({ code, name }) => (`<!-- markplus -->${style}\\n<script>\\n${code}\\n</script>\\n${launch(name)}\\n`))\r\n        .then(output => {\r\n            fs.writeFileSync(path.join(__dirname, './../index.html'), output, 'utf-8');\r\n            console.log(output); // eslint-disable-line no-console\r\n        }).catch(console.error); // eslint-disable-line no-console\r\n};\r\n\r\ncompile();\r\n"]}